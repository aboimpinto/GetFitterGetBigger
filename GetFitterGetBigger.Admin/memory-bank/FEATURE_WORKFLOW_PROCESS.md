# Feature Workflow Process

This document defines the complete lifecycle of features, from inception to release, using a state-based folder structure.

## Feature States and Folder Structure

```
memory-bank/features/
‚îú‚îÄ‚îÄ feature-status.md       # Main dashboard (manually maintained)
‚îú‚îÄ‚îÄ NEXT_FEATURE_ID.txt     # Auto-increment counter
‚îú‚îÄ‚îÄ 0-SUBMITTED/            # Features propagated from API, needs refinement
‚îú‚îÄ‚îÄ 1-READY_TO_DEVELOP/     # Features planned and ready to implement
‚îú‚îÄ‚îÄ 2-IN_PROGRESS/          # Features currently being developed
‚îú‚îÄ‚îÄ 3-COMPLETED/            # Features fully implemented and tested
‚îú‚îÄ‚îÄ 4-BLOCKED/              # Features blocked by dependencies
‚îî‚îÄ‚îÄ 5-SKIPPED/              # Features deferred or cancelled
```

## Important Files and Maintenance

### Core Files (Source of Truth)
These files MUST be maintained and are the authoritative source:

1. **feature-status.md**
   - **Purpose**: Main dashboard showing all features
   - **Updated by**: Developer implementing the feature
   - **When**: When moving features between stages
   - **Required**: YES

2. **NEXT_FEATURE_ID.txt**
   - **Purpose**: Tracks next available feature ID
   - **Updated by**: Automatic increment when creating features
   - **When**: After assigning a new feature ID
   - **Required**: YES

3. **Individual feature files** (in each feature folder):
   - `feature-description.md` - Core feature details
   - `feature-tasks.md` - Task breakdown and tracking
   - **Updated by**: Developer during implementation
   - **When**: As work progresses
   - **Required**: YES

### Optional/Generated Files
These files can be generated from folder contents and are NOT required:

1. **FEATURE_ID_REGISTRY.md** - Can be generated by scanning folders
2. **Analysis/Migration reports** - Temporary, delete after use
3. **Summary reports** - Can be generated on demand

### File Naming Convention
All feature folders MUST follow: `FEAT-XXX-<feature-name>`
- Example: `FEAT-001-service-unit-tests`
- The feature ID is visible in the folder name
- This eliminates the need for separate ID registries

## Feature Lifecycle

### 0. Feature Submission (SUBMITTED)
When features are propagated from API changes:
1. Root folder creates: `memory-bank/features/0-SUBMITTED/[feature-name]/`
2. Contains only `feature-description.md` with:
   - API endpoint changes
   - Request/response formats
   - Business context
   - Potential impact on Admin UI
3. NO task files yet - these are created during refinement

### 1. Feature Refinement & Planning (READY_TO_DEVELOP)
When the team is ready to implement:
1. Review the submitted feature documentation
2. Analyze Admin-specific requirements
3. Create `feature-tasks.md` with UI implementation tasks
4. Move entire folder from `0-SUBMITTED` to `1-READY_TO_DEVELOP`
5. The team decides when this transition happens based on:
   - Current priorities
   - Resource availability
   - Dependencies readiness

#### Important Note on Feature Creation
**ALL features MUST start in 0-SUBMITTED**, even Admin-specific features:
1. Create in `0-SUBMITTED` with basic description
2. Refine and add tasks when ready
3. Move to `1-READY_TO_DEVELOP` after planning

This ensures consistent workflow tracking. Direct creation in 1-READY_TO_DEVELOP is NOT allowed.

### 2. Feature Development (IN_PROGRESS)
When development begins:
1. Move entire feature folder from `1-READY_TO_DEVELOP` to `2-IN_PROGRESS`
2. Create feature branch as specified in tasks file
3. Update task statuses as work progresses
4. Add commit hashes to completed tasks
5. Include any test scripts created during development

**Folder Structure Example:**
```
2-IN_PROGRESS/
‚îî‚îÄ‚îÄ exercise-management/
    ‚îú‚îÄ‚îÄ feature-description.md
    ‚îú‚îÄ‚îÄ feature-tasks.md (with commit hashes)
    ‚îú‚îÄ‚îÄ ui-mockups.png
    ‚îî‚îÄ‚îÄ test-exercise-crud.sh
```

### 3. Feature Completion (COMPLETED)
‚ö†Ô∏è **CRITICAL: Features must NEVER be automatically moved to COMPLETED** ‚ö†Ô∏è

When all tasks are implemented and tested:
1. Ensure all tests are green
2. **MANDATORY: Get explicit user acceptance through manual testing**
   - The user MUST explicitly state the feature is accepted
   - Phrases like "tests passed", "feature accepted", "looks good" are required
   - **NEVER assume acceptance based on silence or completion of tasks**
3. Calculate final time metrics in feature-tasks.md:
   - Sum all actual durations
   - Calculate AI assistance impact percentage
   - Add final summary of time savings
4. **Create mandatory completion reports** (see templates below):
   - `COMPLETION-REPORT.md` - Comprehensive feature summary
   - `TECHNICAL-SUMMARY.md` - Technical implementation details
   - `LESSONS-LEARNED.md` - Insights and recommendations
   - `QUICK-REFERENCE.md` - Quick usage guide
5. **Only after explicit user acceptance and reports created**: Move entire folder from `2-IN_PROGRESS` to `3-COMPLETED`
6. Update feature-description.md with completion date and final status
7. Update feature-status.md with completion status and date
8. Update FEATURE-INDEX.md:
   - Add feature to "Completed" section with completion date
   - Remove from "In Progress" section
   - Update statistics (total/completed/in-progress counts)
   - Add entry to "Recent Updates" section
9. Feature is now eligible for next PI release

‚ö†Ô∏è **REMINDER FOR AI ASSISTANTS**:
- You must NEVER automatically transition features to COMPLETED
- Always wait for explicit user confirmation
- Create a manual testing task and mark it as [ReadyForTesting]
- The user must complete testing and provide explicit acceptance

### 4. Blocked Features (BLOCKED)
If a feature cannot proceed:
1. Move folder from current location to `4-BLOCKED`
2. Add `BLOCKED_REASON.md` file explaining:
   - What is blocking the feature
   - Dependencies needed
   - Link to blocking bug/feature
3. When unblocked, move back to `2-IN_PROGRESS`

### 5. Skipped Features (SKIPPED)
If a feature is deferred or cancelled:
1. Move folder to `5-SKIPPED`
2. Add `SKIPPED_REASON.md` file explaining:
   - Why feature was skipped
   - Future considerations
   - Any partial work completed

## File Templates

### feature-description.md Template
```markdown
# Feature: [Feature Name]

## Feature ID: FEAT-[XXX]
## Created: [Date]
## Status: [Current State]
## Target PI: [PI-YYYY-QX]

## Description
[Detailed description of the feature]

## Business Value
[Why this feature is important]

## User Stories
- As a [user type], I want to [action] so that [benefit]

## Acceptance Criteria
- [ ] Criteria 1
- [ ] Criteria 2

## Technical Specifications
[Any technical details, UI/UX specs, etc.]

## Dependencies
- [List any dependencies]

## Notes
[Additional context or considerations]
```

### feature-tasks.md Template
```markdown
# [Feature Name] Implementation Tasks

## Feature Branch: `feature/[branch-name]`
## Estimated Total Time: [X days / Y hours]
## Actual Total Time: [To be calculated at completion]

### Task Categories
[Tasks organized by logical groupings with time estimates]

### Progress Tracking
- All tasks start as `[ReadyToDevelop]` with time estimate
- Update to `[InProgress: Started: YYYY-MM-DD HH:MM]` when starting
- Update to `[Implemented: <hash> | Started: <time> | Finished: <time> | Duration: Xh Ym]` when complete
- Use `[Blocked: reason]` if blocked

### Tasks
[Detailed task list following FEATURE_IMPLEMENTATION_PROCESS.md with estimates]

### Time Tracking Summary
- **Total Estimated Time:** [Sum of all estimates]
- **Total Actual Time:** [To be calculated from task durations]
- **AI Assistance Impact:** [% reduction in time]
- **Implementation Started:** [First task start time]
- **Implementation Completed:** [Last task finish time]
```

## State Transition Rules

1. **To IN_PROGRESS**: Only when developer is actively working on it
2. **To COMPLETED**: ‚ö†Ô∏è **CRITICAL REQUIREMENTS** ‚ö†Ô∏è
   - ALL implementation tasks must be completed
   - ALL automated tests must pass (100% green)
   - A manual testing task MUST be created and marked [ReadyForTesting]
   - The user MUST complete manual testing
   - The user MUST provide EXPLICIT acceptance (e.g., "tests passed", "feature accepted")
   - **NEVER move to COMPLETED without explicit user confirmation**
   - **AI assistants must NEVER automatically transition to COMPLETED**
3. **To BLOCKED**: As soon as a blocking issue is identified
4. **To SKIPPED**: Only with explicit user decision
5. **From BLOCKED**: Only when blocking issue is resolved
6. **From SKIPPED**: Rare, but possible if feature is revived

## Integration with Release Process

- Only features in `3-COMPLETED` are included in releases
- Features must be completed before PI end date
- Release notes are generated from completed features
- Each feature folder contains all documentation needed for release notes

## Best Practices

1. **One Feature Per Folder**: Keep features atomic and focused
2. **Complete Documentation**: All files should be comprehensive
3. **Test Scripts**: Include all test scripts in the feature folder
4. **Clean Transitions**: Move entire folder, don't leave artifacts
5. **Audit Trail**: Preserve all history in the moved files
6. **Feature ID Usage**: Always use Feature IDs (FEAT-XXX) when referencing features:
   - In bug reports: "Related Feature: FEAT-001"
   - In blocked reasons: "Blocked by FEAT-002"
   - In documentation: "See FEAT-003 for details"
   - Never use folder paths or feature names alone

## Monitoring and Reporting

To get current feature status:
- Count folders in each state directory
- Generate reports from feature-description.md files
- Track velocity by completion dates
- Identify bottlenecks in BLOCKED folder
- Generate AI impact reports:
  - Average time reduction percentage across features
  - Total hours saved with AI assistance
  - Productivity metrics comparison
  - Feature complexity vs time savings analysis

## Cleanup Policy

- COMPLETED features older than 2 PIs can be archived
- SKIPPED features older than 4 PIs can be archived
- Archive location: `memory-bank/archive/features/[year]/`

## AI Assistant Guidelines for Feature Completion

‚ö†Ô∏è **MANDATORY RULES FOR AI ASSISTANTS** ‚ö†Ô∏è

1. **NEVER automatically move features to COMPLETED state**
2. **ALWAYS create a manual testing task** in feature-tasks.md:
   ```markdown
   **Task X.X:** Manual testing and user acceptance `[ReadyForTesting]`
   ```
3. **ALWAYS inform the user that manual testing is required**
4. **WAIT for explicit user acceptance** such as:
   - "Tests passed"
   - "Feature accepted"
   - "Everything looks good"
   - "Approved"
   - Any clear statement of acceptance
5. **Only after explicit acceptance**, update the manual testing task to `[Completed]` and move the feature to COMPLETED

### Example AI Assistant Behavior:
```
‚úÖ CORRECT:
AI: "I've completed all implementation tasks. The feature is now ready for manual testing. 
Please test the following scenarios: [list scenarios]. 
Once you've tested and are satisfied, please let me know so I can mark the feature as completed."

‚ùå INCORRECT:
AI: "All tasks are done. I'm moving the feature to COMPLETED."
```

## Common Mistakes to Avoid

1. **Starting work without proper folder structure**: Always create the feature folder in the appropriate state directory BEFORE starting implementation
2. **Creating task files in wrong location**: Task files must be inside the feature folder, not directly in `memory-bank/features/`
3. **Not moving folders between states**: Remember to move the entire feature folder as it progresses through states
4. **Missing feature-description.md**: Both description and tasks files are required from the start
5. **AI assistants moving features to COMPLETED automatically**: This is NEVER allowed

### Example of Incorrect Start:
```
‚ùå memory-bank/features/my-feature-tasks.md  # Wrong location
```

### Example of Correct Start:
```
‚úÖ memory-bank/features/1-READY_TO_DEVELOP/my-feature/
   ‚îú‚îÄ‚îÄ feature-description.md
   ‚îî‚îÄ‚îÄ feature-tasks.md
```

## Completion Report Templates

When moving a feature to COMPLETED, the following reports MUST be created:

### 1. COMPLETION-REPORT.md Template
```markdown
# [Feature Name] - Completion Report

## Feature Overview
**Feature ID**: FEAT-XXX  
**Feature Name**: [Full feature name]  
**Start Date**: [Date implementation started]  
**Completion Date**: [Date user accepted]  
**Status**: ‚úÖ COMPLETE

## Summary
[Brief description of what was accomplished]

## Implementation Details

### [Project] Changes
1. **[Component/Area]**
   - [What was added/changed]
   - [Key implementation details]

2. **[Another Component/Area]**
   - [What was added/changed]
   - [Key implementation details]

## Issues Resolved During Testing

### Issue 1: [Issue Name]
- **Problem**: [Description]
- **Solution**: [How it was fixed]
- **User Feedback**: [What the user reported]

[Repeat for each issue]

## Test Coverage Improvements
- **Before**: [Coverage %], [Number] tests
- **After**: [Coverage %], [Number] tests
- **New Tests Added**: [Number]

### Specific Improvements
1. **[Component]**: [Before]% ‚Üí [After]%
2. **[Component]**: [Before]% ‚Üí [After]%

## Technical Debt Addressed
[List any refactoring or improvements made]

## Files Changed
- **Total Files**: [Number]
- **Lines Added**: [Number]
- **Lines Removed**: [Number]

## Key Learnings
[Important insights gained during implementation]

## Deployment Notes
- [Database migration requirements]
- [Configuration changes needed]
- [Breaking changes]

## Documentation Created
[List all documentation files created]

## Next Steps
[Any follow-up work or future enhancements]

## Sign-off
- ‚úÖ All acceptance criteria met
- ‚úÖ Manual testing completed successfully
- ‚úÖ Automated tests passing
- ‚úÖ Documentation complete
- ‚úÖ Code review ready

**Feature Status**: COMPLETE and ready for production deployment
```

### 2. TECHNICAL-SUMMARY.md Template
```markdown
# [Feature Name] Technical Implementation Summary

## Architecture Changes

### 1. Data Flow
```
[Diagram or description of data flow]
```

### 2. Key Components Created

#### [Project Name]
```
/ComponentFolder/
  ‚îî‚îÄ‚îÄ ComponentName.ext    # Description of purpose
```

### 3. [Technical Implementation Detail]
```language
// Code example showing key implementation
```

### 4. Validation Rules
[List business rules implemented]

### 5. State Management Pattern
[Describe state management approach]

## Integration Points

### 1. [Integration Area]
[How it integrates with existing system]

## Testing Strategy

### 1. Unit Tests
[Description of unit test approach]

### 2. Integration Tests
[Description of integration test approach]

### 3. Manual Testing
[Key manual test scenarios]

## Performance Considerations
[Any performance optimizations or concerns]

## Security Considerations
[Security measures implemented]

## Breaking Changes
[List any breaking changes]

## Configuration
[Any configuration requirements]

## Deployment
[Deployment sequence and requirements]

## Monitoring
[What should be monitored post-deployment]
```

### 3. LESSONS-LEARNED.md Template
```markdown
# [Feature Name] - Lessons Learned

## What Went Well ‚úÖ

### 1. [Success Area]
[Description of what worked well and why]

### 2. [Another Success]
[Description]

## Challenges Faced üîß

### 1. [Challenge Name]
**Issue**: [Description of the problem]
```
[Example code or scenario if applicable]
```
**Solution**: [How it was resolved]
**Learning**: [Key takeaway]

[Repeat for each challenge]

## Technical Insights üí°

### 1. [Insight Topic]
[Technical learning or discovery]

## Process Improvements üìà

### 1. [Process Area]
[How the process could be improved]

## Recommendations for Future Features üöÄ

### 1. Before Starting
- [ ] [Recommendation]
- [ ] [Recommendation]

### 2. During Development
- [ ] [Recommendation]
- [ ] [Recommendation]

### 3. Testing Phase
- [ ] [Recommendation]
- [ ] [Recommendation]

### 4. Code Quality
- [ ] [Recommendation]
- [ ] [Recommendation]

## Key Takeaways üéØ

1. **[Topic]**: [Key learning]
2. **[Topic]**: [Key learning]
3. **[Topic]**: [Key learning]

## Time Investment
- Initial implementation: ~[X] days
- Bug fixing and testing: ~[X] day
- Test coverage improvements: ~[X] day
- **Total**: ~[X] days

## ROI Analysis
[Analysis of time saved, quality improvements, etc.]

## Quote of the Feature
"[Memorable quote or insight from the implementation]"
```

### 4. QUICK-REFERENCE.md Template
```markdown
# [Feature Name] - Quick Reference

## [Key Concept/Values]
1. **[Value/Type]** - [Description]
2. **[Value/Type]** - [Description]
[List all key values or types]

## Business Rules
- ‚ùå [Rule about what's NOT allowed]
- ‚úÖ [Rule about what IS required]

## Key Components

### [Component Type]
```language
<ComponentName 
    property="value"
    anotherProperty="value" />
```

### API Endpoints
```
GET /api/[endpoint]
POST/PUT /api/[endpoint]
```

### JSON Format
```json
// Request
{
  "field": "value"
}

// Response
{
  "field": "value"
}
```

## Common Issues & Solutions

### [Issue]?
[Solution with code example if needed]

### [Another Issue]?
[Solution]

## Testing
- Unit tests: `[Test file location]`
- Integration tests: [Description]
- Manual tests: [Key scenarios]
```

### 5. FEATURE-INDEX.md Update Template
When moving a feature to COMPLETED, update the FEATURE-INDEX.md file:

```markdown
# Feature Index - GetFitterGetBigger Admin

## Feature Status Overview

### üèÉ In Progress ([Count])
[Remove the completed feature from this section]

### ‚úÖ Completed ([Count])
[Add the feature here with completion date]
- FEAT-XXX: [Feature Name] (Completed: [Month Day, Year])

### üìã Planned ([Count])
[Update if needed]

## Statistics
- Total Features: [Update count]
- Completed: [Update count] ([Update %]%)
- In Progress: [Update count] ([Update %]%)
- Planned: [Update count] ([Update %]%)

## Recent Updates
- **[Month Day, Year]**: FEAT-XXX ([Feature Name]) completed successfully
```